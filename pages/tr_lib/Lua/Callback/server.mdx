# Server
Callbacks provide server-client communication with synchronous-style syntax.

## lib.promise.on
Register a callback that clients can await for.
```lua
lib.promise.on(name, func)
```

### Parameters
* name: `string`
* func: `function`

### Returns
* success `boolean`
---
### Examples
* **Lua**
```lua filename="server.lua"
lib.promise.on('createMultiplePeds', function(source, peds, defaultSettings)
  local createdPeds<const> = createMultiplePeds(source, peds, defaultSettings)
  return createdPeds
end)
```
* **JavaScript**
```js filename="server.js"
lib.promise.on('createMultiplePeds', function(source, peds, defaultSettings) {
  const createdPeds = createMultiplePeds(source, peds, defaultSettings)
  return createdPeds
})
```

## lib.promise.await
Await for a registered  client callback's result.
```lua
lib.promise.await(debug, name, timeout, source, ...)
```

### Parameters
* debug: `boolean` (optional)
* name: `string`
* timeout: `number | nil`
* source: `number`
* ...: `varargs`

### Returns
* `any`
---
### Examples
* **Lua**
```lua filename="server.lua"
lib.promise.on('createSinglePed', function(source, settings)
  local fallback<const> = lib.promise.await('getDefaultSettings', nil, source, settings)
  local createdPeds<const> = createSinglePed(settings, fallback)
  return createdPeds
end)
```
* **JavaScript**
```js filename="server.js"
lib.promise.on('createSinglePed', function(source, settings) {
  const fallback = await lib.promise.await('getDefaultSettings', nil, source, settings)
  const createdPeds = createSinglePed(settings, fallback)
  return createdPeds
})
```